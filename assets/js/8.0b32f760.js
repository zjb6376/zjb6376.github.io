(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{184:function(a,t){a.exports="data:image/png;base64,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"},257:function(a,t,e){"use strict";e.r(t);var s=e(0),n=Object(s.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h4",{attrs:{id:"要点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#要点","aria-hidden":"true"}},[a._v("#")]),a._v(" 要点")]),a._v(" "),s("ul",[s("li",[a._v("线程池的定义")]),a._v(" "),s("li",[a._v("Executors创建线程池的几种方式")]),a._v(" "),s("li",[a._v("ThreadPoolExecutor对象")]),a._v(" "),s("li",[a._v("线程池执行任务逻辑和线程池参数的关系")]),a._v(" "),s("li",[a._v("Executors创建返回ThreadPoolExecutor对象")]),a._v(" "),s("li",[a._v("如何定义线程池参数")])]),a._v(" "),s("h4",{attrs:{id:"使用线程池的优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用线程池的优点","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用线程池的优点")]),a._v(" "),s("p",[a._v("减少资源创建、 降低系统开销、 提高稳定稳定性 （但需要避免内存溢出）")]),a._v(" "),s("h4",{attrs:{id:"executors创建线程池的方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#executors创建线程池的方式","aria-hidden":"true"}},[a._v("#")]),a._v(" Executors创建线程池的方式")]),a._v(" "),s("ul",[s("li",[a._v("创建返回ThreadPoolExecutor对象")]),a._v(" "),s("li",[a._v("创建返回ScheduleThreadPoolExecutor对象")]),a._v(" "),s("li",[a._v("创建返回ForkJoinPool对象")])]),a._v(" "),s("h4",{attrs:{id:"threadpoolexecutor对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#threadpoolexecutor对象","aria-hidden":"true"}},[a._v("#")]),a._v(" ThreadPoolExecutor对象")]),a._v(" "),s("p",[a._v("在介绍"),s("code",[a._v("Executors")]),a._v("创建线程池方法前先介绍一下"),s("code",[a._v("ThreadPoolExecutor")]),a._v("，因为这些创建线程池的静态方法都是返回"),s("code",[a._v("ThreadPoolExecutor")]),a._v("对象，和我们手动创建"),s("code",[a._v("ThreadPoolExecutor")]),a._v("对象的区别就是我们不需要自己传构造函数的参数。"),s("code",[a._v("ThreadPoolExecutor")]),a._v("的构造函数共有四个，但最终调用的都是同一个：")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadPoolExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" corePoolSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" maximumPoolSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("long")]),a._v(" keepAliveTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TimeUnit")]),a._v(" unit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BlockingQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" workQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadFactory")]),a._v(" threadFactory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RejectedExecutionHandler")]),a._v(" handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n")])])]),s("ul",[s("li",[s("p",[a._v("corePoolSize => 线程池核心线程数量")])]),a._v(" "),s("li",[s("p",[a._v("maximumPoolSize => 线程池最大数量")])]),a._v(" "),s("li",[s("p",[a._v("keepAliveTime => 空闲线程存活时间")])]),a._v(" "),s("li",[s("p",[a._v("unit => 时间单位")])]),a._v(" "),s("li",[s("p",[a._v("workQueue => 线程池所使用的缓冲队列")])]),a._v(" "),s("li",[s("p",[a._v("threadFactory => 线程池创建线程使用的工厂")])]),a._v(" "),s("li",[s("p",[a._v("handler => 线程池对拒绝任务的处理策略")])])]),a._v(" "),s("p",[s("img",{attrs:{src:e(184),alt:"10"}})]),a._v(" "),s("ul",[s("li",[s("p",[a._v("判断核心线程数是否已满，核心线程数大小和"),s("code",[a._v("corePoolSize")]),a._v("参数有关，未满则创建线程执行任务")])]),a._v(" "),s("li",[s("p",[a._v("若核心线程池已满，判断队列是否满，队列是否满和"),s("code",[a._v("workQueue")]),a._v("参数有关，若未满则加入队列中")])]),a._v(" "),s("li",[s("p",[a._v("若队列已满，判断线程池是否已满，线程池是否已满和"),s("code",[a._v("maximumPoolSize")]),a._v("参数有关，若未满创建线程执行任务")])]),a._v(" "),s("li",[s("p",[a._v("若线程池已满，则采用拒绝策略处理无法执执行的任务，拒绝策略和"),s("code",[a._v("handler")]),a._v("参数有关")])])]),a._v(" "),s("p",[s("code",[a._v("Executors")]),a._v("创建返回ThreadPoolExecutor对象的方法共有三种：")]),a._v(" "),s("ol",[s("li",[a._v("Executors#newCachedThreadPool => 创建可缓存的线程池")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExecutorService")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("newCachedThreadPool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadPoolExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MAX_VALUE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("60L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("SECONDS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                                  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SynchronousQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[s("code",[a._v("CachedThreadPool")]),a._v("是一个根据需要创建新线程的线程池")]),a._v(" "),s("ul",[s("li",[a._v("corePoolSize => 0，核心线程池的数量为0")]),a._v(" "),s("li",[a._v("maximumPoolSize => Integer.MAX_VALUE，线程池最大数量为Integer.MAX_VALUE，可以认为可以无限创建线程")]),a._v(" "),s("li",[a._v("keepAliveTime => 60L")]),a._v(" "),s("li",[a._v("unit => 秒")]),a._v(" "),s("li",[a._v("workQueue => SynchronousQueue")])]),a._v(" "),s("p",[a._v("当一个任务提交时，"),s("code",[a._v("corePoolSize")]),a._v("为0不创建核心线程，"),s("code",[a._v("SynchronousQueue")]),a._v("是一个不存储元素的队列，可以理解为队里永远是满的，因此最终会创建非核心线程来执行任务。对于非核心线程空闲60s时将被回收。"),s("strong",[a._v("因为"),s("code",[a._v("Integer.MAX_VALUE")]),a._v("非常大，可以认为是可以无限创建线程的，在资源有限的情况下容易引起OOM异常")])]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[a._v("Executors#newSingleThreadExecutor => 创建单线程的线程池")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExecutorService")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("newSingleThreadExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FinalizableDelegatedExecutorService")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadPoolExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MILLISECONDS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LinkedBlockingQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[s("code",[a._v("SingleThreadExecutor")]),a._v("是单线程线程池，只有一个核心线程")]),a._v(" "),s("ul",[s("li",[a._v("corePoolSize => 1，核心线程池的数量为1")]),a._v(" "),s("li",[a._v("maximumPoolSize => 1，线程池最大数量为1，即最多只可以创建一个线程，唯一的线程就是核心线程")]),a._v(" "),s("li",[a._v("keepAliveTime => 0L")]),a._v(" "),s("li",[a._v("unit => 毫秒")]),a._v(" "),s("li",[a._v("workQueue => LinkedBlockingQueue")])]),a._v(" "),s("p",[a._v("当一个任务提交时，首先会创建一个核心线程来执行任务，如果超过核心线程的数量，将会放入队列中，"),s("strong",[a._v("因为"),s("code",[a._v("LinkedBlockingQueue")]),a._v("是长度为"),s("code",[a._v("Integer.MAX_VALUE")]),a._v("的队列，可以认为是无界队列，因此往队列中可以插入无限多的任务，在资源有限的时候容易引起"),s("code",[a._v("OOM")]),a._v("异常")]),a._v("，同时因为无界队列，"),s("code",[a._v("maximumPoolSize")]),a._v("和"),s("code",[a._v("keepAliveTime")]),a._v("参数将无效，压根就不会创建非核心线程。")]),a._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[a._v("Executors#newFixedThreadPool => 创建固定长度的线程池")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExecutorService")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("newFixedThreadPool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" nThreads"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadPoolExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("nThreads"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" nThreads"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MILLISECONDS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                                  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LinkedBlockingQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[s("code",[a._v("FixedThreadPool")]),a._v("是固定核心线程的线程池，固定核心线程数由用户传入")]),a._v(" "),s("ul",[s("li",[a._v("corePoolSize => nThreads，核心线程池的数量为1")]),a._v(" "),s("li",[a._v("maximumPoolSize => nThreads，线程池最大数量为nThreads，即最多只可以创建nThreads个线程")]),a._v(" "),s("li",[a._v("keepAliveTime => 0L")]),a._v(" "),s("li",[a._v("unit => 毫秒")]),a._v(" "),s("li",[a._v("workQueue => LinkedBlockingQueue 它和"),s("code",[a._v("SingleThreadExecutor")]),a._v("类似，唯一的区别就是核心线程数不同，并且由于"),s("strong",[a._v("使用的是"),s("code",[a._v("LinkedBlockingQueue")]),a._v("，在资源有限的时候容易引起"),s("code",[a._v("OOM")]),a._v("异常")])])]),a._v(" "),s("h4",{attrs:{id:"如何定义线程池参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何定义线程池参数","aria-hidden":"true"}},[a._v("#")]),a._v(" 如何定义线程池参数")]),a._v(" "),s("p",[s("strong",[a._v("CPU密集型")]),a._v(" => 线程池的大小推荐为"),s("code",[a._v("CPU")]),a._v("数量 + 1，"),s("code",[a._v("CPU")]),a._v("数量可以根据"),s("code",[a._v("Runtime.availableProcessors")]),a._v("方法获取")]),a._v(" "),s("p",[s("strong",[a._v("IO密集型")]),a._v(" => "),s("code",[a._v("CPU")]),a._v("数量 * "),s("code",[a._v("CPU")]),a._v("利用率 * (1 + 线程等待时间/线程CPU时间)")]),a._v(" "),s("p",[s("strong",[a._v("混合型")]),a._v(" => 将任务分为"),s("code",[a._v("CPU")]),a._v("密集型和"),s("code",[a._v("IO")]),a._v("密集型，然后分别使用不同的线程池去处理，从而使每个线程池可以根据各自的工作负载来调整")]),a._v(" "),s("p",[s("strong",[a._v("阻塞队列")]),a._v(" => 推荐使用有界队列，有界队列有助于避免资源耗尽的情况发生")]),a._v(" "),s("p",[s("strong",[a._v("拒绝策略")]),a._v(" => 默认采用的是拒绝策略，直接在程序中抛出异常【因为是运行时异常，不强制】，这种处理方式不够优雅。处理拒绝策略有以下几种比较推荐：")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("在程序中捕获"),s("code",[a._v("RejectedExecutionException")]),a._v("异常，在捕获异常中对任务进行处理。针对默认拒绝策略")])]),a._v(" "),s("li",[s("p",[a._v("使用"),s("code",[a._v("CallerRunsPolicy")]),a._v("拒绝策略，该策略会将任务交给调用execute的线程执行【一般为主线程】，此时主线程将在一段时间内不能提交任何任务，从而使工作线程处理正在执行的任务。此时提交的线程将被保存在"),s("code",[a._v("TCP")]),a._v("队列中，TCP队列满将会影响客户端，这是一种平缓的性能降低")])]),a._v(" "),s("li",[s("p",[a._v("自定义拒绝策略，只需要实现"),s("code",[a._v("RejectedExecutionHandler")]),a._v("接口即可")])]),a._v(" "),s("li",[s("p",[a._v("如果任务不是特别重要，使用"),s("code",[a._v("DiscardPolicy")]),a._v("和"),s("code",[a._v("DiscardOldestPolicy")]),a._v("拒绝策略将任务丢弃也是可以的")])])])])},[],!1,null,null,null);t.default=n.exports}}]);